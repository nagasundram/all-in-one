(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){e.exports=n(294)},131:function(e,t,n){},135:function(e,t,n){e.exports=n.p+"static/media/icon.84d44aff.png"},284:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=n(21),s=n(29),u=Object(s.a)(),l=n(30),m=n(110),p=n(111),g={SHOW:"ALERT_SHOW",CLEAR:"ALERT_CLEAR"},E={LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT"},h={CATEGORIES_REQUEST:"GET_CATEGORIES_REQUEST",CATEGORIES_SUCCESS:"GET_CATEGORIES_SUCCESS",CATEGORIES_FAILURE:"GET_CATEGORIES_FAILURE"},d=JSON.parse(localStorage.getItem("user")),f=d?{loggedIn:!0,user:d}:{};var O=Object(l.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case E.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case E.LOGIN_FAILURE:case E.LOGOUT:return{};default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.CATEGORIES_REQUEST:return{loading:!0};case h.CATEGORIES_SUCCESS:return{items:t.categories};case h.CATEGORIES_FAILURE:return{error:t.error};default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.SHOW:return{type:"alert-success",message:t.message,isOpen:!0};case g.CLEAR:return{isOpen:!1};default:return e}}}),b=Object(p.createLogger)(),S=Object(l.d)(O,Object(l.a)(m.a,b));function v(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.jwt?{Authorization:"Bearer "+e.jwt,"Access-Control-Allow-Origin":"*"}:{}}n(131);var C=n(24),I=n(25),j=n(27),R=n(26),y=n(28),T=n(298),L=n(296),U=n(119),_=n.n(U),A={show:function(e){return{type:g.SHOW,message:e}},clear:function(){return{type:g.CLEAR}}};var G=n(112),w={api:{URL:"https://sagitminion.herokuapp.com"},route:{DOMAIN:"https://nagasundram.github.io/",PREFIX:"all-in-one"}},N=Object(G.a)({},w),k={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:e,password:t})};return fetch("".concat(N.api.URL,"/authenticate"),n).then(x).then(function(e){return localStorage.setItem("user",JSON.stringify(e)),e})},logout:B};function B(){localStorage.removeItem("user")}function x(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&B();var a=n.error.user_authentication[0];return Promise.reject(a)}return n})}var F={getCategories:function(){var e={method:"GET",headers:v()};return fetch("".concat(N.api.URL,"/categories"),e).then(J)}};function J(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&k.logout();var a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}var Q={login:function(e,t){return function(n){var a;n((a={username:e},{type:E.LOGIN_REQUEST,user:a})),k.login(e,t).then(function(e){n(function(e){return{type:E.LOGIN_SUCCESS,user:e}}(e)),u.push("/all-in-one"),n(A.show("Successfully logged In")),setTimeout(function(){return n(A.clear())},3e3)},function(e){n(function(e){return{type:E.LOGIN_FAILURE,error:e}}(e)),n(A.show(e)),setTimeout(function(){return n(A.clear())},3e3)})}},logout:function(){return function(e){return k.logout(),{type:E.LOGOUT}}}};var H={getCategories:function(){return function(e){e({type:h.CATEGORIES_REQUEST}),F.getCategories().then(function(t){return e(function(e){return{type:h.CATEGORIES_SUCCESS,categories:e}}(t))},function(t){return e(function(e){return{type:h.CATEGORIES_FAILURE,error:e}}(t))})}}};var P=n(121),z=n(297),W=function(e){var t=e.component,n=Object(P.a)(e,["component"]);return r.a.createElement(L.a,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(z.a,{to:{pathname:"/all-in-one/login",state:{from:e.location}}})}}))},D=(n(62),n(19)),M=n.n(D),X=n(23),q=n(37),K=n.n(q),V=n(46),Y=n.n(V),Z=n(59),$=n.n(Z),ee=n(113),te=n.n(ee),ne=(n(135),function(e){function t(){return Object(C.a)(this,t),Object(j.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props,t=e.categories,n=e.classes;return r.a.createElement(r.a.Fragment,null,t.loading&&r.a.createElement($.a,{color:"primary"}),t.error&&r.a.createElement("span",null,"ERROR: ",t.error),t.items&&r.a.createElement(M.a,{container:!0,justify:"center",spacing:8},t.items.map(function(e,t){return r.a.createElement(M.a,{key:e.id,item:!0},r.a.createElement(te.a,Object.assign({in:e.id>0},e.id>0?{timeout:1e3}:{}),r.a.createElement(a.Fragment,null,r.a.createElement(K.a,{component:"h5",variant:"inherit",align:"center"},e.name),r.a.createElement(Y.a,{className:n.paper,align:"center",elevation:10},r.a.createElement("img",{src:e.image_url,className:n.logo})))))})))}}]),t}(r.a.Component));var ae=Object(c.b)(function(e){return{categories:e.categories}})(ne),re=Object(X.withStyles)(function(e){return{paper:{paddingBottom:50,marginTop:5,marginBottom:15,height:140,width:100},logo:{width:50,marginTop:40}}})(ae),oe=n(295),ie=n(74),ce=n.n(ie),se=n(114),ue=n.n(se),le=n(60),me=n.n(le),pe=n(115),ge=n.n(pe),Ee=n(73),he=n.n(Ee),de=function(e){function t(){return Object(C.a)(this,t),Object(j.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(H.getCategories())}},{key:"render",value:function(){var e=this.props,t=e.user,n=(e.categories,e.classes);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{container:!0,className:n.root},r.a.createElement(ce.a,{color:"inherit"},r.a.createElement(K.a,{className:n.text,variant:"h5",gutterBottom:!0},"CATEGORIES")),r.a.createElement(M.a,{container:!0,justify:"center",spacing:16,className:n.content},r.a.createElement(re,null))),r.a.createElement(ce.a,{position:"fixed",color:"primary",className:n.appBar},r.a.createElement(ue.a,{className:n.toolbar},r.a.createElement(K.a,{variant:"h6",gutterBottom:!0,color:"inherit",noWrap:!0},t.email),r.a.createElement(me.a,{color:"secondary","aria-label":"Add",className:n.fabButton},r.a.createElement(he.a,null)),r.a.createElement(oe.a,{to:"/all-in-one/login",color:"inherit",className:"white",title:"Logout"},r.a.createElement(ge.a,null)))))}}]),t}(r.a.Component);var fe=Object(c.b)(function(e){var t=e.categories;return{user:e.authentication.user,categories:t}})(de),Oe=Object(X.withStyles)(function(e){return{text:{paddingTop:2*e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit,color:"black"},paper:{paddingBottom:50,height:140,width:100},list:{marginBottom:2*e.spacing.unit},subHeader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0,position:"fixed"},toolbar:{alignItems:"center",justifyContent:"space-between"},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},content:{marginTop:70}}})(fe),be=n(57),Se=n(31),ve=n(75),Ce=n.n(ve),Ie=n(118),je=n.n(Ie),Re=n(117),ye=n.n(Re),Te=n(116),Le=n.n(Te),Ue=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(j.a)(this,Object(R.a)(t).call(this,e))).props.dispatch(Q.logout()),n.state={username:"",password:"",submitted:!1},n.handleChange=n.handleChange.bind(Object(Se.a)(Object(Se.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(Se.a)(Object(Se.a)(n))),n}return Object(y.a)(t,e),Object(I.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(be.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,n=t.username,a=t.password,r=this.props.dispatch;n&&a&&r(Q.login(n,a))}},{key:"render",value:function(){var e=this.props,t=e.loggingIn,n=e.classes,a=this.state,o=a.username,i=a.password,c=a.submitted;return r.a.createElement("div",{className:"model"},r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement(M.a,{container:!0,justify:"center",spacing:16},r.a.createElement(M.a,{item:!0},r.a.createElement(Ce.a,{error:c&&!o,type:"text",label:"email",name:"username",value:o,onChange:this.handleChange})),r.a.createElement(M.a,{item:!0},r.a.createElement(Ce.a,{error:c&&!i,type:"password",label:"password",className:"form-control",name:"password",value:i,onChange:this.handleChange})),r.a.createElement(M.a,{item:!0},r.a.createElement(me.a,{color:"primary",type:"submit"},t?r.a.createElement(ye.a,null):r.a.createElement(je.a,null)),t&&r.a.createElement($.a,{size:24,className:n.buttonProgress})))))}}]),t}(r.a.Component);var _e=Object(c.b)(function(e){return{loggingIn:e.authentication.loggingIn}})(Ue),Ae=Object(X.withStyles)(function(e){return{text:{paddingTop:2*e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit},paper:{paddingBottom:50},list:{marginBottom:2*e.spacing.unit},subHeader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},toolbar:{alignItems:"center",justifyContent:"space-between"},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},buttonProgress:{color:Le.a[500],position:"absolute",top:"50%",left:"50%",marginLeft:-12,marginTop:10}}})(_e),Ge=n(120),we=n.n(Ge),Ne=(n(284),function(e){function t(e){var n;Object(C.a)(this,t);var a=(n=Object(j.a)(this,Object(R.a)(t).call(this,e))).props.dispatch;return u.listen(function(e,t){a(A.clear())}),n}return Object(y.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null),r.a.createElement(we.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e&&e.isOpen,message:e&&e.message}),r.a.createElement(T.a,{history:u},r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{exact:!0,path:"/all-in-one/",component:Oe}),r.a.createElement(L.a,{path:"/all-in-one/login",component:Ae}))))}}]),t}(r.a.Component));var ke=Object(c.b)(function(e){return{alert:e.alert}})(Ne);i.a.render(r.a.createElement(c.a,{store:S},r.a.createElement(ke,null)),document.getElementById("root"))},62:function(e,t,n){}},[[122,2,1]]]);
//# sourceMappingURL=main.942d7243.chunk.js.map